{
  "customInstructions": "Follow the project's CLAUDE.md guidelines. CrecheBooks is a claude-flow v3 project. Use concurrent execution for all operations. Batch all related tool calls in a single message. Use pnpm (not npm). All amounts in ZAR cents. Tenant isolation is mandatory.",
  "env": {
    "CLAUDE_FLOW_VERSION": "3",
    "CLAUDE_FLOW_AUTO_COMMIT": "false",
    "CLAUDE_FLOW_AUTO_PUSH": "false",
    "CLAUDE_FLOW_HOOKS_ENABLED": "true",
    "CLAUDE_FLOW_TELEMETRY_ENABLED": "true",
    "CLAUDE_FLOW_REMOTE_EXECUTION": "true",
    "CLAUDE_FLOW_CHECKPOINTS_ENABLED": "true",
    "CLAUDE_FLOW_SONA_PROFILE": "balanced",
    "CLAUDE_FLOW_FLASH_ATTENTION": "true",
    "CLAUDE_FLOW_GNN_SEARCH": "true",
    "CLAUDE_FLOW_V3_INTELLIGENCE": "true",
    "AGENTIC_FLOW_INTELLIGENCE": "true",
    "AGENTIC_FLOW_LEARNING_RATE": "0.05",
    "AGENTIC_FLOW_EPSILON": "0.1",
    "AGENTIC_FLOW_MEMORY_BACKEND": "agentdb",
    "AGENTIC_FLOW_V3_MODE": "true",
    "AGENTIC_FLOW_SWARM_SIZE": "15",
    "AGENTIC_FLOW_TOPOLOGY": "hierarchical",
    "AGENTIC_FLOW_SECURITY_FIRST": "true",
    "AGENTIC_FLOW_PERFORMANCE_TIER": "standard",
    "AGENTIC_FLOW_LEARNING_TIER": "standard",
    "AGENTIC_FLOW_PRETRAIN_ENABLED": "true",
    "AGENTIC_FLOW_SONA_ENABLED": "true",
    "AGENTIC_FLOW_HNSW_ENABLED": "true",
    "AGENTIC_FLOW_MOE_ATTENTION": "true",
    "AGENTIC_FLOW_MULTI_ALGORITHM_RL": "true",
    "AGENTIC_FLOW_COMPRESSION_ENABLED": "true",
    "AGENTIC_FLOW_SWARM_COMM_ENABLED": "true",
    "AGENTIC_FLOW_AGENT_NAME": "claude-code",
    "AGENTIC_FLOW_PATTERN_BROADCAST_THRESHOLD": "0.7",
    "AGENTIC_FLOW_CONSENSUS_TIMEOUT": "30000",
    "AGENTIC_FLOW_AUTO_BROADCAST_PATTERNS": "true"
  },
  "permissions": {
    "allow": [
      "Bash(npx:*)",
      "Bash(npx claude-flow:*)",
      "Bash(pnpm:*)",
      "Bash(npm run:*)",
      "Bash(npm run lint)",
      "Bash(npm run test:*)",
      "Bash(npm test:*)",
      "Bash(git status)",
      "Bash(git diff:*)",
      "Bash(git log:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git push)",
      "Bash(git config:*)",
      "Bash(git tag:*)",
      "Bash(git branch:*)",
      "Bash(git checkout:*)",
      "Bash(git stash:*)",
      "Bash(jq:*)",
      "Bash(node:*)",
      "Bash(which:*)",
      "Bash(pwd)",
      "Bash(ls:*)",
      "Bash(docker:*)",
      "Bash(docker compose:*)",
      "mcp__claude-flow__*",
      "mcp__ruv-swarm",
      "mcp__ruv-swarm__*",
      "mcp__flow-nexus__*"
    ],
    "deny": [
      "Bash(rm -rf /)"
    ]
  },
  "checkpointManager": {
    "enabled": true,
    "autoCommit": false,
    "commitMessage": "checkpoint: CrecheBooks development progress",
    "frequency": "after-significant-change",
    "includeMetrics": true
  },
  "githubIntegration": {
    "enabled": true,
    "features": {
      "autoCommit": false,
      "prTracking": true,
      "issueManagement": true,
      "progressReporting": true
    }
  },
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Edit|Write|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "timeout": 5000,
            "command": ".claude/helpers/guidance-hooks.sh pre-edit \"$TOOL_INPUT_file_path\" 2>/dev/null || true"
          },
          {
            "type": "command",
            "timeout": 4000,
            "command": "cat | jq -r '.tool_input.file_path // .tool_input.path // empty' | tr '\\n' '\\0' | xargs -0 -I {} npx claude-flow@alpha hooks pre-edit --file '{}' --auto-assign-agents true --load-context true 2>/dev/null || true"
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "timeout": 3000,
            "command": ".claude/helpers/guidance-hooks.sh pre-command \"$TOOL_INPUT_command\" 2>/dev/null || true"
          },
          {
            "type": "command",
            "timeout": 3000,
            "command": "cat | jq -r '.tool_input.command // empty' | tr '\\n' '\\0' | xargs -0 -I {} npx claude-flow@alpha hooks pre-command --command '{}' --validate-safety true --prepare-resources true 2>/dev/null || true"
          }
        ]
      },
      {
        "matcher": "Task",
        "hooks": [
          {
            "type": "command",
            "timeout": 2000,
            "command": ".claude/helpers/guidance-hooks.sh route \"$TOOL_INPUT_prompt\" 2>/dev/null || true"
          },
          {
            "type": "command",
            "timeout": 3000,
            "command": ".claude/helpers/swarm-hooks.sh pre-task \"$TOOL_INPUT_prompt\" 2>/dev/null || true"
          },
          {
            "type": "command",
            "timeout": 3000,
            "command": "cat | jq -r '.tool_input.prompt // empty' | tr '\\n' '\\0' | xargs -0 -I {} npx claude-flow@alpha hooks pre-task --description '{}' --coordinate-swarm true 2>/dev/null || true"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Edit|Write|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "timeout": 5000,
            "command": ".claude/helpers/guidance-hooks.sh post-edit \"$TOOL_INPUT_file_path\" 2>/dev/null || true"
          },
          {
            "type": "command",
            "timeout": 4000,
            "command": ".claude/helpers/learning-hooks.sh store \"Edit: $TOOL_INPUT_file_path\" code 0.7 2>/dev/null || true"
          },
          {
            "type": "command",
            "timeout": 4000,
            "command": "cat | jq -r '.tool_input.file_path // .tool_input.path // empty' | tr '\\n' '\\0' | xargs -0 -I {} npx claude-flow@alpha hooks post-edit --file '{}' --format true --update-memory true --train-patterns true 2>/dev/null || true"
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "timeout": 3000,
            "command": "cat | jq -r '.tool_input.command // empty' | tr '\\n' '\\0' | xargs -0 -I {} npx claude-flow@alpha hooks post-command --command '{}' --track-metrics true --store-results true 2>/dev/null || true"
          },
          {
            "type": "command",
            "timeout": 2000,
            "command": ".claude/helpers/swarm-monitor.sh check 2>/dev/null || true"
          }
        ]
      },
      {
        "matcher": "Task",
        "hooks": [
          {
            "type": "command",
            "timeout": 3000,
            "command": ".claude/helpers/swarm-monitor.sh check 2>/dev/null || true"
          },
          {
            "type": "command",
            "timeout": 3000,
            "command": ".claude/helpers/swarm-hooks.sh post-task \"$TOOL_INPUT_prompt\" true 2>/dev/null || true"
          },
          {
            "type": "command",
            "timeout": 4000,
            "command": ".claude/helpers/checkpoint-manager.sh agent-checkpoint \"Task completed: $TOOL_INPUT_prompt\" 2>/dev/null || true"
          },
          {
            "type": "command",
            "timeout": 3000,
            "command": "cat | jq -r '{agent: .tool_input.subagent_type, description: .tool_input.description} | @json' | xargs -I {} npx claude-flow@alpha hooks post-task --agent-data '{}' --update-swarm-status true --train-patterns true 2>/dev/null || true"
          }
        ]
      }
    ],
    "PostToolUseFailure": [
      {
        "matcher": "Edit|Write|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "timeout": 5000,
            "command": "npx claude-flow@alpha hooks post-edit --file \"$TOOL_INPUT_file_path\" --success false --learn-from-failure true 2>/dev/null || true"
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "timeout": 3000,
            "command": "npx claude-flow@alpha hooks post-command --command \"$TOOL_INPUT_command\" --exit-code 1 --success false --learn-from-failure true 2>/dev/null || true"
          }
        ]
      },
      {
        "matcher": "Task",
        "hooks": [
          {
            "type": "command",
            "timeout": 4000,
            "command": "npx claude-flow@alpha hooks post-task --task-id \"task-$(date +%s)\" --description \"$TOOL_INPUT_prompt\" --success false --learn-from-failure true --retry-analysis true 2>/dev/null || true"
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "timeout": 3000,
            "command": ".claude/helpers/daemon-manager.sh start 3 5 2>/dev/null || true"
          },
          {
            "type": "command",
            "timeout": 8000,
            "command": ".claude/helpers/learning-hooks.sh session-start 2>/dev/null || true"
          },
          {
            "type": "command",
            "timeout": 3000,
            "command": ".claude/helpers/swarm-hooks.sh agents 2>/dev/null || true"
          },
          {
            "type": "command",
            "timeout": 5000,
            "command": ".claude/helpers/guidance-hooks.sh session-context 2>/dev/null || true"
          },
          {
            "type": "command",
            "timeout": 5000,
            "command": "npx claude-flow@alpha hooks session-start --auto-configure true --restore-context true 2>/dev/null || true"
          }
        ]
      }
    ],
    "SessionEnd": [
      {
        "hooks": [
          {
            "type": "command",
            "timeout": 10000,
            "command": ".claude/helpers/learning-hooks.sh session-end 2>/dev/null || true"
          },
          {
            "type": "command",
            "timeout": 6000,
            "command": ".claude/helpers/checkpoint-manager.sh session-end \"CrecheBooks development session completed\" 2>/dev/null || true"
          },
          {
            "type": "command",
            "timeout": 8000,
            "command": "npx claude-flow@alpha hooks session-end --persist-memory true --export-patterns true --generate-summary true 2>/dev/null || true"
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "command",
            "timeout": 4000,
            "command": ".claude/helpers/guidance-hooks.sh user-prompt \"$USER_PROMPT\" 2>/dev/null || true"
          },
          {
            "type": "command",
            "timeout": 5000,
            "command": "npx claude-flow@alpha hooks route-task --auto-swarm true --detect-complexity true 2>/dev/null || true"
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "timeout": 8000,
            "command": ".claude/helpers/learning-hooks.sh session-end 2>/dev/null || true"
          },
          {
            "type": "command",
            "timeout": 5000,
            "command": "npx claude-flow@alpha hooks session-end --generate-summary true --persist-state true --export-metrics true 2>/dev/null || true"
          }
        ]
      }
    ],
    "PreCompact": [
      {
        "matcher": "manual",
        "hooks": [
          {
            "type": "command",
            "command": "/bin/bash -c 'INPUT=$(cat); CUSTOM=$(echo \"$INPUT\" | jq -r \".custom_instructions // \\\"\\\"\"); echo \"PreCompact Guidance:\"; echo \"IMPORTANT: Review CLAUDE.md in project root for:\"; echo \"   - 107 available agents across 28 categories\"; echo \"   - Swarm coordination strategies (hierarchical, mesh, adaptive)\"; echo \"   - CrecheBooks domain rules (ZAR cents, tenant isolation, SARS)\"; echo \"   - Batch all operations in single messages\"; if [ -n \"$CUSTOM\" ]; then echo \"Custom compact instructions: $CUSTOM\"; fi; echo \"Ready for compact operation\"'"
          }
        ]
      },
      {
        "matcher": "auto",
        "hooks": [
          {
            "type": "command",
            "command": "/bin/bash -c 'echo \"Auto-Compact Guidance (Context Window Full):\"; echo \"CRITICAL: Before compacting, ensure you understand:\"; echo \"   - All 107 agents in .claude/agents/ (28 categories)\"; echo \"   - CrecheBooks domain: ZAR cents, tenant isolation, SARS tax\"; echo \"   - pnpm monorepo: apps/api (NestJS 11) + apps/web (Next.js 15)\"; echo \"   - Batch operations in single messages\"; echo \"Auto-compact proceeding with full context\"'"
          }
        ]
      }
    ]
  },
  "agents": {
    "source": ".claude/agents",
    "customAgents": []
  },
  "skills": {
    "source": ".claude/commands",
    "enabled": true
  },
  "helpers": {
    "directory": ".claude/helpers",
    "enabled": true,
    "scripts": {
      "v3ProgressUpdater": ".claude/helpers/update-v3-progress.sh",
      "v3ConfigValidator": ".claude/helpers/validate-v3-config.sh",
      "v3QuickStatus": ".claude/helpers/v3-quick-status.sh",
      "v3CheckpointManager": ".claude/helpers/checkpoint-manager.sh",
      "v3SwarmMonitor": ".claude/helpers/swarm-monitor.sh",
      "v3SwarmHooks": ".claude/helpers/swarm-hooks.sh",
      "v3Master": ".claude/helpers/v3.sh"
    }
  },
  "includeCoAuthoredBy": true,
  "enabledMcpjsonServers": ["claude-flow@alpha", "ruv-swarm"],
  "statusLine": {
    "type": "command",
    "command": ".claude/helpers/statusline.cjs"
  }
}
